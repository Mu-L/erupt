"use strict";(self.webpackChunkerupt=self.webpackChunkerupt||[]).push([[840],{8840:(uo,Z,c)=>{c.r(Z),c.d(Z,{FlowModule:()=>mo});var u=c(4341),ve=c(1626),T=c(513),S=c(1011),A=c(6122),W=c(7094),h=c(1951),g=c(8203),l=c(177),e=c(7705);class xe{constructor(s,t){this._document=t;const i=this._textarea=this._document.createElement("textarea"),o=i.style;o.position="fixed",o.top=o.opacity="0",o.left="-999em",i.setAttribute("aria-hidden","true"),i.value=s,i.readOnly=!0,(this._document.fullscreenElement||this._document.body).appendChild(i)}copy(){const s=this._textarea;let t=!1;try{if(s){const i=this._document.activeElement;s.select(),s.setSelectionRange(0,s.value.length),t=this._document.execCommand("copy"),i&&i.focus()}}catch{}return t}destroy(){const s=this._textarea;s&&(s.remove(),this._textarea=void 0)}}let ye=(()=>{class n{constructor(t){this._document=t}copy(t){const i=this.beginCopy(t),o=i.copy();return i.destroy(),o}beginCopy(t){return new xe(t,this._document)}static{this.\u0275fac=function(i){return new(i||n)(e.KVO(l.qQ))}}static{this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),be=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=e.$C({type:n})}static{this.\u0275inj=e.G2t({})}}return n})();var D=c(6860),x=c(7806);let K=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=e.FsC({type:n,selectors:[["button","nz-trans-button",""]],hostVars:8,hostBindings:function(i,o){2&i&&e.xc7("border","0")("background","transparent")("padding","0")("line-height","inherit")}})}}return n})(),Ne=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=e.$C({type:n})}static{this.\u0275inj=e.G2t({imports:[l.MD]})}}return n})();var O=c(7232),I=c(5154),L=c(1413),Te=c(4412),X=c(1985),M=c(3726),J=c(983),Se=c(6648),q=c(8359),f=c(6977),H=c(5558),Ie=c(6697),ee=c(3993),v=c(7336),y=c(1025),C=c(1635),w=c(6042),te=c(4500),_=c(317);function we(n,s){if(1&n&&(e.qex(0),e.nrm(1,"span",2),e.bVm()),2&n){const t=s.$implicit;e.R7$(1),e.Y8G("nzType",t)}}const Ee=["textarea"];function De(n,s){if(1&n){const t=e.RV6();e.j41(0,"textarea",2,3),e.bIt("blur",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.confirm())}),e.k0s(),e.j41(2,"button",4),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.confirm())}),e.nrm(3,"span",5),e.k0s()}}function Oe(n,s){if(1&n&&(e.qex(0),e.nrm(1,"span",8),e.bVm()),2&n){const t=s.$implicit;e.R7$(1),e.Y8G("nzType",t)}}function Me(n,s){if(1&n){const t=e.RV6();e.j41(0,"button",6),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.onClick())}),e.DNE(1,Oe,2,1,"ng-container",7),e.k0s()}if(2&n){const t=e.XpG();e.Y8G("nzTooltipTitle",null===t.tooltip?null:t.tooltip||(null==t.locale?null:t.locale.edit)),e.R7$(1),e.Y8G("nzStringTemplateOutlet",t.icon)}}const ke=["ellipsisContainer"],Pe=["expandable"],Re=["contentTemplate"];function Fe(n,s){1&n&&e.SdG(0,0,["*ngIf","!content"])}function Be(n,s){if(1&n&&(e.DNE(0,Fe,1,0,"ng-content",1),e.EFF(1)),2&n){const t=s.content;e.Y8G("ngIf",!t),e.R7$(1),e.SpI(" ",t," ")}}function je(n,s){}function Ve(n,s){if(1&n&&(e.qex(0),e.EFF(1),e.bVm()),2&n){const t=e.XpG(3);e.R7$(1),e.JRh(t.nzSuffix)}}const Ge=function(n){return{content:n}};function $e(n,s){if(1&n&&(e.qex(0),e.DNE(1,je,0,0,"ng-template",6),e.DNE(2,Ve,2,1,"ng-container",1),e.bVm()),2&n){const t=e.XpG(2),i=e.sdS(1);e.R7$(1),e.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",e.eq3(3,Ge,t.nzContent)),e.R7$(1),e.Y8G("ngIf",t.nzSuffix)}}function Ae(n,s){if(1&n&&(e.qex(0),e.EFF(1),e.bVm()),2&n){const t=e.XpG(3);e.R7$(1),e.JRh(t.ellipsisStr)}}function Le(n,s){if(1&n&&(e.qex(0),e.EFF(1),e.bVm()),2&n){const t=e.XpG(3);e.R7$(1),e.JRh(t.nzSuffix)}}function Xe(n,s){if(1&n){const t=e.RV6();e.j41(0,"a",9,10),e.bIt("click",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.onExpand())}),e.EFF(2),e.k0s()}if(2&n){const t=e.XpG(3);e.R7$(2),e.SpI(" ",null==t.locale?null:t.locale.expand," ")}}function He(n,s){if(1&n&&(e.nrm(0,"span",null,7),e.DNE(2,Ae,2,1,"ng-container",1),e.DNE(3,Le,2,1,"ng-container",1),e.DNE(4,Xe,3,1,"a",8)),2&n){const t=e.XpG(2);e.R7$(2),e.Y8G("ngIf",t.isEllipsis),e.R7$(1),e.Y8G("ngIf",t.nzSuffix),e.R7$(1),e.Y8G("ngIf",t.nzExpandable&&t.isEllipsis)}}function Ue(n,s){if(1&n&&(e.qex(0),e.DNE(1,$e,3,5,"ng-container",4),e.DNE(2,He,5,3,"ng-template",null,5,e.C5r),e.bVm()),2&n){const t=e.sdS(3),i=e.XpG();e.R7$(1),e.Y8G("ngIf",i.expanded||!i.hasOperationsWithEllipsis&&1===i.nzEllipsisRows&&!i.hasEllipsisObservers||i.canCssEllipsis||i.nzSuffix&&i.expanded)("ngIfElse",t)}}function Ye(n,s){if(1&n){const t=e.RV6();e.j41(0,"nz-text-edit",11),e.bIt("endEditing",function(o){e.eBV(t);const r=e.XpG();return e.Njj(r.onEndEditing(o))})("startEditing",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.onStartEditing())}),e.k0s()}if(2&n){const t=e.XpG();e.Y8G("text",t.nzContent)("icon",t.nzEditIcon)("tooltip",t.nzEditTooltip)}}function Qe(n,s){if(1&n){const t=e.RV6();e.j41(0,"nz-text-copy",12),e.bIt("textCopy",function(o){e.eBV(t);const r=e.XpG();return e.Njj(r.onTextCopy(o))}),e.k0s()}if(2&n){const t=e.XpG();e.Y8G("text",t.copyText)("tooltips",t.nzCopyTooltips)("icons",t.nzCopyIcons)}}const Ze=["*"];let ne=(()=>{class n{constructor(t,i,o,r){this.host=t,this.cdr=i,this.clipboard=o,this.i18n=r,this.copied=!1,this.copyId=-1,this.nativeElement=this.host.nativeElement,this.copyTooltip=null,this.copedTooltip=null,this.copyIcon="copy",this.copedIcon="check",this.destroy$=new L.B,this.icons=["copy","check"],this.textCopy=new e.bkB}ngOnInit(){this.i18n.localeChange.pipe((0,f.Q)(this.destroy$)).subscribe(()=>{this.locale=this.i18n.getLocaleData("Text"),this.updateTooltips(),this.cdr.markForCheck()})}ngOnChanges(t){const{tooltips:i,icons:o}=t;i&&this.updateTooltips(),o&&this.updateIcons()}ngOnDestroy(){clearTimeout(this.copyId),this.destroy$.next(!0),this.destroy$.complete()}onClick(){if(this.copied)return;this.copied=!0,this.cdr.detectChanges();const t=this.text;this.textCopy.emit(t),this.clipboard.copy(t),this.onCopied()}onCopied(){clearTimeout(this.copyId),this.copyId=setTimeout(()=>{this.copied=!1,this.cdr.detectChanges()},3e3)}updateTooltips(){if(null===this.tooltips)this.copedTooltip=null,this.copyTooltip=null;else if(Array.isArray(this.tooltips)){const[t,i]=this.tooltips;this.copyTooltip=t||this.locale?.copy,this.copedTooltip=i||this.locale?.copied}else this.copyTooltip=this.locale?.copy,this.copedTooltip=this.locale?.copied;this.cdr.markForCheck()}updateIcons(){const[t,i]=this.icons;this.copyIcon=t,this.copedIcon=i,this.cdr.markForCheck()}static{this.\u0275fac=function(i){return new(i||n)(e.rXU(e.aKT),e.rXU(e.gRc),e.rXU(ye),e.rXU(O.Og))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["nz-text-copy"]],inputs:{text:"text",tooltips:"tooltips",icons:"icons"},outputs:{textCopy:"textCopy"},exportAs:["nzTextCopy"],features:[e.OA$],decls:2,vars:4,consts:[["type","button","nz-tooltip","","nz-trans-button","",1,"ant-typography-copy",3,"nzTooltipTitle","click"],[4,"nzStringTemplateOutlet"],["nz-icon","",3,"nzType"]],template:function(i,o){1&i&&(e.j41(0,"button",0),e.bIt("click",function(){return o.onClick()}),e.DNE(1,we,2,1,"ng-container",1),e.k0s()),2&i&&(e.AVh("ant-typography-copy-success",o.copied),e.Y8G("nzTooltipTitle",o.copied?o.copedTooltip:o.copyTooltip),e.R7$(1),e.Y8G("nzStringTemplateOutlet",o.copied?o.copedIcon:o.copyIcon))},dependencies:[h.Dn,I.LH,K,x.m],encapsulation:2,changeDetection:0})}}return n})(),ie=(()=>{class n{set textarea(t){this.textarea$.next(t)}constructor(t,i,o,r,a){this.ngZone=t,this.host=i,this.cdr=o,this.i18n=r,this.destroy$=a,this.editing=!1,this.icon="edit",this.startEditing=new e.bkB,this.endEditing=new e.bkB(!0),this.nativeElement=this.host.nativeElement,this.textarea$=new Te.t(null)}ngOnInit(){this.i18n.localeChange.pipe((0,f.Q)(this.destroy$)).subscribe(()=>{this.locale=this.i18n.getLocaleData("Text"),this.cdr.markForCheck()}),this.textarea$.pipe((0,H.n)(t=>t?new X.c(i=>this.ngZone.runOutsideAngular(()=>(0,M.R)(t.nativeElement,"keydown").subscribe(i))):J.w),(0,f.Q)(this.destroy$)).subscribe(t=>{t.keyCode!==v._f&&t.keyCode!==v.Fm||this.ngZone.run(()=>{t.keyCode===v._f?this.onCancel():this.onEnter(t),this.cdr.markForCheck()})}),this.textarea$.pipe((0,H.n)(t=>t?new X.c(i=>this.ngZone.runOutsideAngular(()=>(0,M.R)(t.nativeElement,"input").subscribe(i))):J.w),(0,f.Q)(this.destroy$)).subscribe(t=>{this.currentText=t.target.value})}onClick(){this.beforeText=this.text,this.currentText=this.beforeText,this.editing=!0,this.startEditing.emit(),this.focusAndSetValue()}confirm(){this.editing=!1,this.endEditing.emit(this.currentText)}onEnter(t){t.stopPropagation(),t.preventDefault(),this.confirm()}onCancel(){this.currentText=this.beforeText,this.confirm()}focusAndSetValue(){const t=this.ngZone.isStable?(0,Se.H)(Promise.resolve()):this.ngZone.onStable.pipe((0,Ie.s)(1));this.ngZone.runOutsideAngular(()=>{t.pipe((0,ee.E)(this.textarea$),(0,f.Q)(this.destroy$)).subscribe(([,i])=>{i&&(i.nativeElement.focus(),i.nativeElement.value=this.currentText||"",this.autosizeDirective.resizeToFitContent(),this.cdr.markForCheck())})})}static{this.\u0275fac=function(i){return new(i||n)(e.rXU(e.SKi),e.rXU(e.aKT),e.rXU(e.gRc),e.rXU(O.Og),e.rXU(y.y4))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["nz-text-edit"]],viewQuery:function(i,o){if(1&i&&(e.GBs(Ee,5),e.GBs(S.c9,5)),2&i){let r;e.mGM(r=e.lsd())&&(o.textarea=r.first),e.mGM(r=e.lsd())&&(o.autosizeDirective=r.first)}},inputs:{text:"text",icon:"icon",tooltip:"tooltip"},outputs:{startEditing:"startEditing",endEditing:"endEditing"},exportAs:["nzTextEdit"],features:[e.Jv_([y.y4])],decls:3,vars:2,consts:[[3,"ngIf","ngIfElse"],["notEditing",""],["nz-input","","nzAutosize","",3,"blur"],["textarea",""],["nz-trans-button","",1,"ant-typography-edit-content-confirm",3,"click"],["nz-icon","","nzType","enter"],["nz-tooltip","","nz-trans-button","",1,"ant-typography-edit",3,"nzTooltipTitle","click"],[4,"nzStringTemplateOutlet"],["nz-icon","",3,"nzType"]],template:function(i,o){if(1&i&&(e.DNE(0,De,4,0,"ng-template",0),e.DNE(1,Me,2,2,"ng-template",null,1,e.C5r)),2&i){const r=e.sdS(2);e.Y8G("ngIf",o.editing)("ngIfElse",r)}},dependencies:[l.bT,h.Dn,I.LH,S.Sy,S.c9,K,x.m],encapsulation:2,changeDetection:0})}}return n})(),Je=(()=>{class n{get hasEllipsisObservers(){return this.nzOnEllipsis.observers.length>0}get canCssEllipsis(){return this.nzEllipsis&&this.cssEllipsis&&!this.expanded&&!this.hasEllipsisObservers}get hasOperationsWithEllipsis(){return(this.nzCopyable||this.nzEditable||this.nzExpandable)&&this.nzEllipsis}get copyText(){return"string"==typeof this.nzCopyText?this.nzCopyText:this.nzContent}constructor(t,i,o,r,a,p,m,d,z,$){this.nzConfigService=t,this.host=i,this.cdr=o,this.viewContainerRef=r,this.renderer=a,this.platform=p,this.i18n=m,this.resizeService=z,this.directionality=$,this._nzModuleName="typography",this.nzCopyable=!1,this.nzEditable=!1,this.nzDisabled=!1,this.nzExpandable=!1,this.nzEllipsis=!1,this.nzCopyTooltips=void 0,this.nzCopyIcons=["copy","check"],this.nzEditTooltip=void 0,this.nzEditIcon="edit",this.nzEllipsisRows=1,this.nzContentChange=new e.bkB,this.nzCopy=new e.bkB,this.nzExpandChange=new e.bkB,this.nzOnEllipsis=new e.bkB,this.expandableBtnElementCache=null,this.editing=!1,this.cssEllipsis=!1,this.isEllipsis=!0,this.expanded=!1,this.ellipsisStr="...",this.dir="ltr",this.viewInit=!1,this.rfaId=-1,this.destroy$=new L.B,this.windowResizeSubscription=q.yU.EMPTY,this.document=d}onTextCopy(t){this.nzCopy.emit(t)}onStartEditing(){this.editing=!0}onEndEditing(t){this.editing=!1,this.nzContentChange.emit(t),this.nzContent===t&&this.renderOnNextFrame(),this.cdr.markForCheck()}onExpand(){this.isEllipsis=!1,this.expanded=!0,this.nzExpandChange.emit(),this.nzOnEllipsis.emit(!1)}canUseCSSEllipsis(){return!(this.nzEditable||this.nzCopyable||this.nzExpandable||this.nzSuffix||this.hasEllipsisObservers)&&(0,_.Fq)(1===this.nzEllipsisRows?"textOverflow":"webkitLineClamp")}renderOnNextFrame(){(0,te.F)(this.rfaId),this.viewInit&&this.nzEllipsis&&!(this.nzEllipsisRows<0)&&!this.expanded&&this.platform.isBrowser&&(this.rfaId=(0,te.j)(()=>{this.syncEllipsis()}))}getOriginContentViewRef(){const t=this.viewContainerRef.createEmbeddedView(this.contentTemplate,{content:this.nzContent});return t.detectChanges(),{viewRef:t,removeView:()=>{this.viewContainerRef.remove(this.viewContainerRef.indexOf(t))}}}syncEllipsis(){if(this.cssEllipsis)return;const{viewRef:t,removeView:i}=this.getOriginContentViewRef(),o=[this.textCopyRef,this.textEditRef].filter(z=>z&&z.nativeElement).map(z=>z.nativeElement),r=this.getExpandableBtnElement();r&&o.push(r);const{contentNodes:a,text:p,ellipsis:m}=(0,_.xP)(this.host.nativeElement,this.nzEllipsisRows,t.rootNodes,o,this.ellipsisStr,this.nzSuffix);i(),this.ellipsisText=p,m!==this.isEllipsis&&(this.isEllipsis=m,this.nzOnEllipsis.emit(m));const d=this.ellipsisContainer.nativeElement;for(;d.firstChild;)this.renderer.removeChild(d,d.firstChild);a.forEach(z=>{this.renderer.appendChild(d,z.cloneNode(!0))}),this.cdr.markForCheck()}getExpandableBtnElement(){if(this.nzExpandable){const t=this.locale?this.locale.expand:"",i=this.expandableBtnElementCache;if(!i||i.innerText===t){const o=this.document.createElement("a");o.className="ant-typography-expand",o.innerText=t,this.expandableBtnElementCache=o}return this.expandableBtnElementCache}return this.expandableBtnElementCache=null,null}renderAndSubscribeWindowResize(){this.platform.isBrowser&&(this.windowResizeSubscription.unsubscribe(),this.cssEllipsis=this.canUseCSSEllipsis(),this.renderOnNextFrame(),this.windowResizeSubscription=this.resizeService.subscribe().pipe((0,f.Q)(this.destroy$)).subscribe(()=>this.renderOnNextFrame()))}ngOnInit(){this.i18n.localeChange.pipe((0,f.Q)(this.destroy$)).subscribe(()=>{this.locale=this.i18n.getLocaleData("Text"),this.cdr.markForCheck()}),this.directionality.change?.pipe((0,f.Q)(this.destroy$)).subscribe(t=>{this.dir=t,this.cdr.detectChanges()}),this.dir=this.directionality.value}ngAfterViewInit(){this.viewInit=!0,this.renderAndSubscribeWindowResize()}ngOnChanges(t){const{nzCopyable:i,nzEditable:o,nzExpandable:r,nzEllipsis:a,nzContent:p,nzEllipsisRows:m,nzSuffix:d}=t;(i||o||r||a||p||m||d)&&this.nzEllipsis&&(this.expanded?this.windowResizeSubscription.unsubscribe():this.renderAndSubscribeWindowResize())}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete(),this.expandableBtnElementCache=null,this.windowResizeSubscription.unsubscribe()}static{this.\u0275fac=function(i){return new(i||n)(e.rXU(w.yx),e.rXU(e.aKT),e.rXU(e.gRc),e.rXU(e.c1b),e.rXU(e.sFG),e.rXU(D.OD),e.rXU(O.Og),e.rXU(l.qQ),e.rXU(y.cB),e.rXU(g.dS,8))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["nz-typography"],["","nz-typography",""],["p","nz-paragraph",""],["span","nz-text",""],["h1","nz-title",""],["h2","nz-title",""],["h3","nz-title",""],["h4","nz-title",""]],viewQuery:function(i,o){if(1&i&&(e.GBs(ie,5),e.GBs(ne,5),e.GBs(ke,5),e.GBs(Pe,5),e.GBs(Re,5)),2&i){let r;e.mGM(r=e.lsd())&&(o.textEditRef=r.first),e.mGM(r=e.lsd())&&(o.textCopyRef=r.first),e.mGM(r=e.lsd())&&(o.ellipsisContainer=r.first),e.mGM(r=e.lsd())&&(o.expandableBtn=r.first),e.mGM(r=e.lsd())&&(o.contentTemplate=r.first)}},hostVars:26,hostBindings:function(i,o){2&i&&(e.xc7("-webkit-line-clamp",o.canCssEllipsis&&o.nzEllipsisRows>1?o.nzEllipsisRows:null),e.AVh("ant-typography",!o.editing)("ant-typography-rtl","rtl"===o.dir)("ant-typography-edit-content",o.editing)("ant-typography-secondary","secondary"===o.nzType)("ant-typography-warning","warning"===o.nzType)("ant-typography-danger","danger"===o.nzType)("ant-typography-success","success"===o.nzType)("ant-typography-disabled",o.nzDisabled)("ant-typography-ellipsis",o.nzEllipsis&&!o.expanded)("ant-typography-single-line",o.nzEllipsis&&1===o.nzEllipsisRows)("ant-typography-ellipsis-single-line",o.canCssEllipsis&&1===o.nzEllipsisRows)("ant-typography-ellipsis-multiple-line",o.canCssEllipsis&&o.nzEllipsisRows>1))},inputs:{nzCopyable:"nzCopyable",nzEditable:"nzEditable",nzDisabled:"nzDisabled",nzExpandable:"nzExpandable",nzEllipsis:"nzEllipsis",nzCopyTooltips:"nzCopyTooltips",nzCopyIcons:"nzCopyIcons",nzEditTooltip:"nzEditTooltip",nzEditIcon:"nzEditIcon",nzContent:"nzContent",nzEllipsisRows:"nzEllipsisRows",nzType:"nzType",nzCopyText:"nzCopyText",nzSuffix:"nzSuffix"},outputs:{nzContentChange:"nzContentChange",nzCopy:"nzCopy",nzExpandChange:"nzExpandChange",nzOnEllipsis:"nzOnEllipsis"},exportAs:["nzTypography"],features:[e.OA$],ngContentSelectors:Ze,decls:5,vars:3,consts:[["contentTemplate",""],[4,"ngIf"],[3,"text","icon","tooltip","endEditing","startEditing",4,"ngIf"],[3,"text","tooltips","icons","textCopy",4,"ngIf"],[4,"ngIf","ngIfElse"],["jsEllipsis",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["ellipsisContainer",""],["class","ant-typography-expand",3,"click",4,"ngIf"],[1,"ant-typography-expand",3,"click"],["expandable",""],[3,"text","icon","tooltip","endEditing","startEditing"],[3,"text","tooltips","icons","textCopy"]],template:function(i,o){1&i&&(e.NAR(),e.DNE(0,Be,2,2,"ng-template",null,0,e.C5r),e.DNE(2,Ue,4,2,"ng-container",1),e.DNE(3,Ye,1,3,"nz-text-edit",2),e.DNE(4,Qe,1,3,"nz-text-copy",3)),2&i&&(e.R7$(2),e.Y8G("ngIf",!o.editing),e.R7$(1),e.Y8G("ngIf",o.nzEditable),e.R7$(1),e.Y8G("ngIf",o.nzCopyable&&!o.editing))},dependencies:[l.bT,l.T3,ne,ie],encapsulation:2,changeDetection:0})}}return(0,C.Cg)([(0,_.H3)()],n.prototype,"nzCopyable",void 0),(0,C.Cg)([(0,_.H3)()],n.prototype,"nzEditable",void 0),(0,C.Cg)([(0,_.H3)()],n.prototype,"nzDisabled",void 0),(0,C.Cg)([(0,_.H3)()],n.prototype,"nzExpandable",void 0),(0,C.Cg)([(0,_.H3)()],n.prototype,"nzEllipsis",void 0),(0,C.Cg)([(0,w.H4)()],n.prototype,"nzCopyTooltips",void 0),(0,C.Cg)([(0,w.H4)()],n.prototype,"nzCopyIcons",void 0),(0,C.Cg)([(0,w.H4)()],n.prototype,"nzEditTooltip",void 0),(0,C.Cg)([(0,w.H4)()],n.prototype,"nzEditIcon",void 0),(0,C.Cg)([(0,w.H4)(),(0,_.YI)()],n.prototype,"nzEllipsisRows",void 0),n})(),qe=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=e.$C({type:n})}static{this.\u0275inj=e.G2t({imports:[g.jI,l.MD,h.Y3,I.Qt,S.j,O.bP,Ne,be,x.C,D.IK]})}}return n})();var et=c(8927),tt=c(1997),oe=c(2986),nt=c(3190),it=c(8960),ot=c(2513),rt=c(7481),st=c(1166),at=c(4327),ct=c(2358),lt=c(2096),pt=c(2874),re=c(1236),dt=c(5703),ht=c(9448);let gt=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=e.$C({type:n})}static{this.\u0275inj=e.G2t({imports:[g.jI,l.MD]})}}return n})();var ft=c(7529),Ct=c(9327);let bt=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=e.$C({type:n})}static{this.\u0275inj=e.G2t({imports:[g.jI,l.MD,h.Y3,Ct.RH,D.IK]})}}return n})();var Nt=c(1868);let Ft=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=e.$C({type:n})}static{this.\u0275inj=e.G2t({imports:[g.jI,l.MD,x.C,h.Y3]})}}return n})();var Bt=c(9541),jt=c(3359),Vt=c(4331),Gt=c(9438),$t=c(3146),At=c(5699),se=c(7064),Lt=c(2983),Xt=c(1912),Ht=c(3617),Ut=c(6504),Yt=c(2542),B=c(1672);let zn=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=e.$C({type:n})}static{this.\u0275inj=e.G2t({imports:[g.jI,l.MD,x.C,D.IK]})}}return n})(),En=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=e.$C({type:n})}static{this.\u0275inj=e.G2t({imports:[g.jI,l.MD,D.IK,h.Y3,x.C]})}}return n})(),Gn=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=e.$C({type:n})}static{this.\u0275inj=e.G2t({imports:[g.jI,l.MD,h.Y3,x.C,se.m]})}}return n})();var $n=c(4696),An=c(1217);let ni=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=e.$C({type:n})}static{this.\u0275inj=e.G2t({imports:[g.jI,l.MD,u.YN,oe.IJ,T.Zw,S.j,O.bP,h.Y3,B._v]})}}return n})();var ii=c(3493),k=c(6969),j=c(7891);c(7673),c(7786),c(3294),c(6354),c(9172),c(6939),c(5463);let U=(()=>{class n{constructor(){this.triggerChange$=new L.B}triggerChanged(){return this.triggerChange$.asObservable()}registerTrigger(t){this.trigger!==t&&(this.trigger=t,this.triggerChange$.next(t))}ngOnDestroy(){this.triggerChange$.complete()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac})}}return n})();const yi={provide:u.kq,useExisting:(0,e.Rfq)(()=>pe),multi:!0};let pe=(()=>{class n{constructor(t,i,o,r,a){this.el=t,this.ngZone=i,this.ref=o,this.destroy$=r,this.nzMentionService=a,this.onChange=()=>{},this.onTouched=()=>{},this.onFocusin=new e.bkB,this.onBlur=new e.bkB,this.onInput=new e.bkB,this.onKeydown=new e.bkB,this.onClick=new e.bkB}completeEvents(){this.onFocusin.complete(),this.onBlur.complete(),this.onInput.complete(),this.onKeydown.complete(),this.onClick.complete()}focus(t=null){this.el.nativeElement.focus(),this.el.nativeElement.setSelectionRange(t,t)}insertMention(t){const i=this.el.nativeElement.value,o=`${t.mention} `,r=[i.slice(0,t.startPos+1),o,i.slice(t.endPos,i.length)].join("");this.el.nativeElement.value=r,this.focus(t.startPos+o.length+1),this.onChange(r),this.value=r}writeValue(t){this.value=t,this.el.nativeElement.value="string"==typeof t?t:""}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}ngAfterViewInit(){this.nzMentionService.registerTrigger(this),this.setupEventListener("blur",this.onBlur),this.setupEventListener("focusin",this.onFocusin),this.setupEventListener("input",this.onInput,!0),this.setupEventListener("click",this.onClick,!0),this.setupEventListener("keydown",this.onKeydown,!0)}ngOnDestroy(){this.completeEvents()}setupEventListener(t,i,o=!1){this.ngZone.runOutsideAngular(()=>{(0,M.R)(this.el.nativeElement,t).pipe((0,f.Q)(this.destroy$)).subscribe(r=>{i.observers.length&&this.ngZone.run(()=>{i.emit(o?r:void 0),this.ref.markForCheck()})})})}static{this.\u0275fac=function(i){return new(i||n)(e.rXU(e.aKT),e.rXU(e.SKi),e.rXU(e.gRc),e.rXU(y.y4),e.rXU(U))}}static{this.\u0275dir=e.FsC({type:n,selectors:[["input","nzMentionTrigger",""],["textarea","nzMentionTrigger",""]],hostAttrs:["autocomplete","off"],outputs:{onFocusin:"onFocusin",onBlur:"onBlur",onInput:"onInput",onKeydown:"onKeydown",onClick:"onClick"},exportAs:["nzMentionTrigger"],features:[e.Jv_([y.y4,yi])]})}}return n})(),bi=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=e.$C({type:n})}static{this.\u0275inj=e.G2t({imports:[g.jI,l.MD,u.YN,k.z_,h.Y3,B._v,j.J1]})}}return n})();var Ni=c(8928),Ti=c(2047);const Si=["nodeNameInput"];function Ii(n,s){if(1&n&&(e.j41(0,"nz-tooltip",16),e.nrm(1,"span",17),e.k0s()),2&n){const t=e.XpG();e.Y8G("title",t.errorInfo||"\u8bbe\u7f6e\u9519\u8bef")}}function wi(n,s){1&n&&e.nrm(0,"span",18)}function Ei(n,s){if(1&n){const t=e.RV6();e.j41(0,"input",19,20),e.bIt("blur",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.onBlur())})("ngModelChange",function(o){e.eBV(t);const r=e.XpG();return e.Njj(r.modelValue.name=o)}),e.k0s()}if(2&n){const t=e.XpG();e.Y8G("ngModel",t.modelValue.name)}}function Di(n,s){if(1&n){const t=e.RV6();e.j41(0,"div",21),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.onEnableEdit())}),e.EFF(1),e.k0s()}if(2&n){const t=e.XpG();e.R7$(1),e.SpI("",t.modelValue.name," ")}}function Oi(n,s){if(1&n){const t=e.RV6();e.j41(0,"div",22)(1,"span",23),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.onDelete())}),e.k0s()()}}function Mi(n,s){1&n&&e.nrm(0,"span",24)}function ki(n,s){if(1&n){const t=e.RV6();e.j41(0,"app-insert-btn",25),e.bIt("insertNode",function(o){e.eBV(t);const r=e.XpG();return e.Njj(r.onInsertNode(o))}),e.k0s()}}let Y=(()=>{class n{constructor(){this.moveLn=!1,this.moveRn=!1,this.type="",this.color="",this.headerIcon="",this.content="",this.readonly=!1,this.showError=!1,this.errorInfo="",this.isDefault=!1,this.placeholder="\u8bf7\u8bbe\u7f6e",this.desc="",this.modelValueChange=new e.bkB,this.select=new e.bkB,this.delete=new e.bkB,this.insertNode=new e.bkB,this.copy=new e.bkB,this.moveL=new e.bkB,this.moveR=new e.bkB,this.enableEdit=!1}ngAfterViewInit(){}onEnableEdit(){this.readonly||(this.enableEdit=!0,setTimeout(()=>{this.nodeNameInput&&this.nodeNameInput.nativeElement.focus()}))}onBlur(){this.enableEdit=!1}onSelect(){this.select.emit()}onDelete(){this.delete.emit()}onInsertNode(t){this.insertNode.emit(t)}onCopy(){this.copy.emit()}onMoveL(){this.moveL.emit()}onMoveR(){this.moveR.emit()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-branch-node"]],viewQuery:function(i,o){if(1&i&&e.GBs(Si,5),2&i){let r;e.mGM(r=e.lsd())&&(o.nodeNameInput=r.first)}},inputs:{moveLn:"moveLn",moveRn:"moveRn",type:"type",color:"color",headerIcon:"headerIcon",content:"content",readonly:"readonly",modelValue:"modelValue",showError:"showError",errorInfo:"errorInfo",isDefault:"isDefault",placeholder:"placeholder",desc:"desc"},outputs:{modelValueChange:"modelValueChange",select:"select",delete:"delete",insertNode:"insertNode",copy:"copy",moveL:"moveL",moveR:"moveR"},decls:20,vars:15,consts:[[1,"p-node"],[3,"title",4,"ngIf"],[1,"p-node-body"],[1,"p-node-move",3,"click"],["nz-icon","","nzType","left",4,"ngIf"],[2,"flex","1"],[1,"p-node-header"],["autofocus","",3,"ngModel","blur","ngModelChange",4,"ngIf"],["class","row-text",3,"click",4,"ngIf"],["class","node-action",4,"ngIf"],["nzType","secondary","nzSize","small",1,"node-desc"],[1,"p-node-content",3,"click"],["nzEllipsis","","nzEllipsisRows","4"],["nz-icon","","nzType","right",4,"ngIf"],[1,"p-node-add"],[3,"insertNode",4,"ngIf"],[3,"title"],["nz-icon","","nzType","warning","nzTheme","fill",1,"node-err-tip"],["nz-icon","","nzType","left"],["autofocus","",3,"ngModel","blur","ngModelChange"],["nodeNameInput",""],[1,"row-text",3,"click"],[1,"node-action"],[1,"fa","fa-close",3,"click"],["nz-icon","","nzType","right"],[3,"insertNode"]],template:function(i,o){1&i&&(e.j41(0,"div",0),e.DNE(1,Ii,2,1,"nz-tooltip",1),e.j41(2,"div",2)(3,"div",3),e.bIt("click",function(){return o.onMoveL()}),e.DNE(4,wi,1,0,"span",4),e.k0s(),e.j41(5,"div",5)(6,"div",6)(7,"div"),e.DNE(8,Ei,2,1,"input",7),e.DNE(9,Di,2,1,"div",8),e.k0s(),e.DNE(10,Oi,2,0,"div",9),e.j41(11,"nz-typography",10),e.EFF(12),e.k0s()(),e.j41(13,"div",11),e.bIt("click",function(){return o.onSelect()}),e.j41(14,"nz-typography",12),e.EFF(15),e.k0s()()(),e.j41(16,"div",3),e.bIt("click",function(){return o.onMoveR()}),e.DNE(17,Mi,1,0,"span",13),e.k0s()(),e.j41(18,"div",14),e.DNE(19,ki,1,0,"app-insert-btn",15),e.k0s()()),2&i&&(e.R7$(1),e.Y8G("ngIf",o.showError),e.R7$(1),e.xc7("--shadowColor",o.color),e.AVh("node-err",o.showError),e.R7$(2),e.Y8G("ngIf",!o.readonly&&o.moveLn&&!o.isDefault),e.R7$(3),e.xc7("color",o.isDefault?"#898989":o.color),e.R7$(1),e.Y8G("ngIf",o.enableEdit),e.R7$(1),e.Y8G("ngIf",!o.enableEdit),e.R7$(1),e.Y8G("ngIf",!o.readonly&&!o.isDefault),e.R7$(2),e.JRh(o.desc),e.R7$(3),e.SpI(" ",o.content||o.placeholder," "),e.R7$(2),e.Y8G("ngIf",!o.readonly&&o.moveRn&&!o.isDefault),e.R7$(2),e.Y8G("ngIf",!o.readonly))},styles:['.p-node[_ngcontent-%COMP%]{width:200px;margin-bottom:8px;position:relative}.p-node[_ngcontent-%COMP%]   .node-err-tip[_ngcontent-%COMP%]{position:absolute;right:-30px;color:var(--error-color)}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%]{cursor:pointer;background:white;overflow:hidden;border-radius:5px;display:flex;align-items:center;justify-content:space-between;box-shadow:0 0 5px #d8d8d8}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%]   .p-node-move[_ngcontent-%COMP%]{width:15px}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%]   .p-node-move[_ngcontent-%COMP%]:hover{background:#F5F6F6}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%]:hover{box-shadow:0 0 5px 0 var(--shadowColor)}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%]:hover   .node-action[_ngcontent-%COMP%]{display:inline!important}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%]:hover   .node-desc[_ngcontent-%COMP%]{display:none}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child, .p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child{height:100%}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child:hover, .p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child:hover{background:#d9d9d9}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%]   .p-node-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;height:25px;font-size:13px}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%]   .p-node-header[_ngcontent-%COMP%]   .node-action[_ngcontent-%COMP%]{color:#767676;display:none}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%]   .p-node-header[_ngcontent-%COMP%]   .node-action[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:2px}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%]   .p-node-header[_ngcontent-%COMP%]   .node-desc[_ngcontent-%COMP%]{position:absolute;right:8px}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%]   .p-node-header[_ngcontent-%COMP%]   .row-text[_ngcontent-%COMP%]:hover{text-decoration:underline}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%]   .p-node-header[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;align-items:center}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%]   .p-node-header[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-left:3px;width:115px}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%]   .p-node-header[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:115px;border:1px solid #d9d9d9;border-radius:5px}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%]   .p-node-header[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%]   .p-node-content[_ngcontent-%COMP%]{padding:5px;min-height:50px;display:flex;justify-content:space-between;align-items:center;font-size:15px;color:#656363}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%]   .p-node-content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{word-wrap:break-word}.p-node[_ngcontent-%COMP%]   .p-node-add[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;align-items:center;height:80px}.p-node[_ngcontent-%COMP%]   .p-node-add[_ngcontent-%COMP%]:before{position:absolute;content:"";width:2px;height:80px;background:#d9d9d9}.p-node[_ngcontent-%COMP%]   .p-node-add[_ngcontent-%COMP%]:after{content:"";position:absolute;top:80px;left:50%;transform:translate(-50%);width:0;border-style:solid;border-width:8px 6px 4px;border-color:#d9d9d9 transparent transparent}']})}}return n})();class P{createBranch(s){throw new Error("Method not implemented.")}}function b(){return"node_"+Math.random().toString(36).substr(2,9)}function V(n){n&&"object"==typeof n&&(n.id&&(n.id=b()),n.branch&&Array.isArray(n.branch)&&n.branch.forEach(s=>V(s)),n.props&&n.props.branch&&Array.isArray(n.props.branch)&&n.props.branch.forEach(s=>V(s)))}const Pi=["nodeNameInput"];function Ri(n,s){if(1&n&&(e.j41(0,"nz-tooltip",9),e.nrm(1,"span",10),e.k0s()),2&n){const t=e.XpG();e.Y8G("title",t.errorInfo||"\u8bbe\u7f6e\u9519\u8bef")}}function Fi(n,s){if(1&n){const t=e.RV6();e.j41(0,"input",18,19),e.bIt("blur",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.onBlur())})("ngModelChange",function(o){e.eBV(t);const r=e.XpG(2);return e.Njj(r.model.name=o)}),e.k0s()}if(2&n){const t=e.XpG(2);e.Y8G("ngModel",t.model.name)}}function Bi(n,s){if(1&n){const t=e.RV6();e.j41(0,"div",20),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.onEnableEdit())}),e.EFF(1),e.k0s()}if(2&n){const t=e.XpG(2);e.R7$(1),e.SpI("",t.model.name," ")}}function ji(n,s){if(1&n){const t=e.RV6();e.j41(0,"span",21),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.onDelete())}),e.k0s()}}function Vi(n,s){if(1&n){const t=e.RV6();e.j41(0,"div",11)(1,"div",12)(2,"div"),e.DNE(3,Fi,2,1,"input",13),e.DNE(4,Bi,2,1,"div",14),e.k0s(),e.DNE(5,ji,1,0,"span",15),e.k0s(),e.j41(6,"div",16),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.onSelect())}),e.SdG(7),e.nrm(8,"span",17),e.k0s()()}if(2&n){const t=e.XpG();e.xc7("background",t.headerColor)("--shadowColor",t.headerColor),e.AVh("node-err",t.showError),e.R7$(1),e.xc7("background-color",t.headerColor),e.R7$(2),e.Y8G("ngIf",t.enableEdit),e.R7$(1),e.Y8G("ngIf",!t.enableEdit),e.R7$(1),e.Y8G("ngIf",t.showClose&&!t.readonly)}}function Gi(n,s){1&n&&(e.qex(0),e.j41(1,"p"),e.EFF(2,"Some contents..."),e.k0s(),e.j41(3,"p"),e.EFF(4,"Some contents..."),e.k0s(),e.j41(5,"p"),e.EFF(6,"Some contents..."),e.k0s(),e.bVm())}function $i(n,s){1&n&&(e.qex(0),e.j41(1,"p"),e.EFF(2,"Some contents..."),e.k0s(),e.j41(3,"p"),e.EFF(4,"Some contents..."),e.k0s(),e.j41(5,"p"),e.EFF(6,"Some contents..."),e.k0s(),e.bVm())}function Ai(n,s){if(1&n){const t=e.RV6();e.j41(0,"div",22)(1,"button",23),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.close())}),e.EFF(2,"Cancel"),e.k0s(),e.j41(3,"button",24),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.close())}),e.EFF(4,"Save"),e.k0s()()}}const Li=["*"];let R=(()=>{class n{constructor(){this.headerColor="",this.headerIcon="",this.content="",this.readonly=!1,this.showError=!1,this.errorInfo="",this.showClose=!0,this.showBody=!0,this.placeholder="\u8bf7\u8bbe\u7f6e",this.modelChange=new e.bkB,this.select=new e.bkB,this.delete=new e.bkB,this.insertNode=new e.bkB,this.showDrawer=!1,this.enableEdit=!1}ngAfterViewInit(){}onEnableEdit(){this.readonly||(this.enableEdit=!0,setTimeout(()=>{this.nodeNameInput&&this.nodeNameInput.nativeElement.focus()}))}onBlur(){this.enableEdit=!1}onSelect(){this.showDrawer=!0,this.select.emit()}onDelete(){this.delete.emit()}onInsertNode(t){this.insertNode.emit(t)}close(){this.showDrawer=!1}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["erupt-node"]],viewQuery:function(i,o){if(1&i&&e.GBs(Pi,5),2&i){let r;e.mGM(r=e.lsd())&&(o.nodeNameInput=r.first)}},inputs:{headerColor:"headerColor",headerIcon:"headerIcon",content:"content",readonly:"readonly",model:"model",showError:"showError",errorInfo:"errorInfo",showClose:"showClose",showBody:"showBody",placeholder:"placeholder"},outputs:{modelChange:"modelChange",select:"select",delete:"delete",insertNode:"insertNode"},ngContentSelectors:Li,decls:10,vars:5,consts:[[1,"p-node"],["nzPlacement","top-start",3,"title",4,"ngIf"],["class","p-node-body",3,"node-err","background","--shadowColor",4,"ngIf"],[1,"p-node-add"],[3,"insertNode"],["nzPlacement","right","nzTitle","Basic Drawer",3,"nzVisible","nzFooter","nzWidth","nzOnClose"],[4,"nzDrawerContent"],[4,"footer"],["footerTpl",""],["nzPlacement","top-start",3,"title"],["nz-icon","","nzType","warning","nzTheme","fill",1,"node-err-tip"],[1,"p-node-body"],[1,"p-node-header"],["style","color: #000;","autofocus","",3,"ngModel","blur","ngModelChange",4,"ngIf"],["class","row-text",3,"click",4,"ngIf"],["class","fa fa-close",3,"click",4,"ngIf"],[1,"p-node-content",3,"click"],["nz-icon","","nzType","arrow-right",1,"w-p-node-click"],["autofocus","",2,"color","#000",3,"ngModel","blur","ngModelChange"],["nodeNameInput",""],[1,"row-text",3,"click"],[1,"fa","fa-close",3,"click"],[2,"float","right"],["nz-button","",2,"margin-right","8px",3,"click"],["nz-button","","nzType","primary",3,"click"]],template:function(i,o){if(1&i&&(e.NAR(),e.j41(0,"div",0),e.DNE(1,Ri,2,1,"nz-tooltip",1),e.DNE(2,Vi,9,11,"div",2),e.j41(3,"div",3)(4,"app-insert-btn",4),e.bIt("insertNode",function(a){return o.onInsertNode(a)}),e.k0s()()(),e.j41(5,"nz-drawer",5),e.bIt("nzOnClose",function(){return o.close()}),e.DNE(6,Gi,7,0,"ng-container",6),e.DNE(7,$i,7,0,"ng-container",7),e.k0s(),e.DNE(8,Ai,5,0,"ng-template",null,8,e.C5r)),2&i){const r=e.sdS(9);e.R7$(1),e.Y8G("ngIf",o.showError),e.R7$(1),e.Y8G("ngIf",o.showBody),e.R7$(3),e.Y8G("nzVisible",o.showDrawer)("nzFooter",r)("nzWidth",600)}},styles:['.p-node[_ngcontent-%COMP%]{width:200px;margin-bottom:8px;position:relative}.p-node[_ngcontent-%COMP%]   .node-err-tip[_ngcontent-%COMP%]{position:absolute;right:-30px;color:var(--error-color)}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%]{cursor:pointer;background:white;overflow:hidden;border-radius:5px;box-shadow:0 0 5px #d8d8d8}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%]   .p-node-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:0 10px;color:#fff;height:25px;font-size:13px}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%]   .p-node-header[_ngcontent-%COMP%]   .row-text[_ngcontent-%COMP%]:hover{text-decoration:underline}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%]   .p-node-header[_ngcontent-%COMP%]   .node-del[_ngcontent-%COMP%]{display:none}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%]   .p-node-header[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;align-items:center}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%]   .p-node-header[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-left:3px;width:150px}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%]   .p-node-header[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:150px;border:none;border-radius:5px}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%]   .p-node-header[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%]   .p-node-content[_ngcontent-%COMP%]{padding:7px 6px 7px 7px;min-height:40px;display:flex;justify-content:space-between;align-items:center;font-size:15px;background:white;margin:0 4px 4px;border-radius:5px;color:#656363}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%]   .p-node-content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:92%;word-wrap:break-word}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%]:hover{box-shadow:0 0 5px 0 var(--shadowColor)}.p-node[_ngcontent-%COMP%]   .p-node-body[_ngcontent-%COMP%]:hover   .node-del[_ngcontent-%COMP%]{display:inline}.p-node[_ngcontent-%COMP%]   .p-node-add[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;align-items:center;height:80px}.p-node[_ngcontent-%COMP%]   .p-node-add[_ngcontent-%COMP%]:before{position:absolute;content:"";width:3px;height:80px;background:#d9d9d9}.p-node[_ngcontent-%COMP%]   .p-node-add[_ngcontent-%COMP%]:after{content:"";position:absolute;top:80px;left:50%;transform:translate(-50%);width:0;border-style:solid;border-width:8px 6px 4px;border-color:#d9d9d9 transparent transparent}']})}}return n})(),de=(()=>{class n extends P{constructor(){super(...arguments),this.readonly=!1,this.branch=[],this.index=0,this.modelValueChange=new e.bkB,this.select=new e.bkB,this.delete=new e.bkB,this.insertNode=new e.bkB,this.showErr=!1,this.errInfo=null}code(){return"approval"}name(){return"\u5ba1\u6279\u4eba"}color(){return"#EC8151"}onSelect(){}onDelete(){this.delete.emit({branch:this.branch,index:this.index})}onInsertNode(t){this.insertNode.emit({branch:this.branch,index:this.index,type:t})}click(){}create(){return{id:b(),type:this.code(),name:this.name()}}static{this.\u0275fac=function(){let t;return function(o){return(t||(t=e.xGo(n)))(o||n)}}()}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-approval-node"]],inputs:{readonly:"readonly",modelValue:"modelValue",branch:"branch",index:"index"},outputs:{modelValueChange:"modelValueChange",select:"select",delete:"delete",insertNode:"insertNode"},features:[e.Vt3],decls:2,vars:6,consts:[["headerIcon","stamp",3,"model","readonly","showError","errorInfo","headerColor","modelChange","select","insertNode","delete"]],template:function(i,o){1&i&&(e.j41(0,"erupt-node",0),e.bIt("modelChange",function(a){return o.modelValue=a})("select",function(){return o.onSelect()})("insertNode",function(a){return o.onInsertNode(a)})("delete",function(){return o.onDelete()}),e.EFF(1),e.k0s()),2&i&&(e.Y8G("model",o.modelValue)("readonly",o.readonly)("showError",o.showErr)("errorInfo",o.errInfo)("headerColor",o.color()),e.R7$(1),e.SpI(" ",o.name(),"\n"))},dependencies:[R]})}}return n})(),he=(()=>{class n extends P{constructor(){super(...arguments),this.readonly=!1,this.branch=[],this.index=0,this.modelValueChange=new e.bkB,this.select=new e.bkB,this.delete=new e.bkB,this.insertNode=new e.bkB,this.showErr=!1,this.errInfo=null}onSelect(){this.select.emit(this.modelValue)}onDelete(){this.delete.emit({branch:this.branch,index:this.index})}onInsertNode(t){this.insertNode.emit({branch:this.branch,index:this.index,type:t})}code(){return"cc"}color(){return"#5994F3"}name(){return"\u6284\u9001\u4eba"}create(){return{id:b(),type:this.code(),name:this.name()}}static{this.\u0275fac=function(){let t;return function(o){return(t||(t=e.xGo(n)))(o||n)}}()}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-cc-node"]],inputs:{readonly:"readonly",modelValue:"modelValue",branch:"branch",index:"index"},outputs:{modelValueChange:"modelValueChange",select:"select",delete:"delete",insertNode:"insertNode"},features:[e.Vt3],decls:2,vars:5,consts:[["headerIcon","notification",3,"model","readonly","showError","errorInfo","headerColor","modelChange","select","insertNode","delete"]],template:function(i,o){1&i&&(e.j41(0,"erupt-node",0),e.bIt("modelChange",function(a){return o.modelValue=a})("select",function(){return o.onSelect()})("insertNode",function(a){return o.onInsertNode(a)})("delete",function(){return o.onDelete()}),e.EFF(1," \u6284\u9001\u4eba\n"),e.k0s()),2&i&&e.Y8G("model",o.modelValue)("readonly",o.readonly)("showError",o.showErr)("errorInfo",o.errInfo)("headerColor",o.color())},dependencies:[R]})}}return n})(),me=(()=>{class n extends P{constructor(){super(...arguments),this.readonly=!1,this.branch=[],this.index=0,this.moveLn=!1,this.moveRn=!1,this.isDefault=!1,this.modelValueChange=new e.bkB,this.select=new e.bkB,this.delete=new e.bkB,this.insertNode=new e.bkB,this.moveL=new e.bkB,this.moveR=new e.bkB,this.showErr=!1,this.errInfo=null}onSelect(){this.select.emit(this.modelValue)}onDelete(){this.delete.emit({branch:this.branch,index:this.index})}onInsertNode(t){this.insertNode.emit({branch:this.branch,index:this.index,type:t})}onMoveL(){this.moveL.emit()}onMoveR(){this.moveR.emit()}code(){return"exclusive"}color(){return"#59B9A4"}name(){return"\u4e92\u65a5\u6761\u4ef6"}create(){return{id:b()+"_fork",type:"gateway",name:"\u7f51\u5173\u8282\u70b9",props:{type:this.code(),branch:[this.createBranch(1),this.createBranch()]},branch:[[],[]]}}createBranch(t){return{id:b(),type:"exclusive",name:t?"\u6761\u4ef6"+t:"\u9ed8\u8ba4\u6761\u4ef6",parentId:null,childId:null}}static{this.\u0275fac=function(){let t;return function(o){return(t||(t=e.xGo(n)))(o||n)}}()}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-exclusive-node"]],inputs:{readonly:"readonly",modelValue:"modelValue",branch:"branch",index:"index",moveLn:"moveLn",moveRn:"moveRn",isDefault:"isDefault"},outputs:{modelValueChange:"modelValueChange",select:"select",delete:"delete",insertNode:"insertNode",moveL:"moveL",moveR:"moveR"},features:[e.Vt3],decls:1,vars:9,consts:[["headerIcon","share",3,"modelValue","readonly","showError","errorInfo","color","isDefault","moveRn","moveLn","desc","modelValueChange","insertNode","moveL","moveR","delete","select"]],template:function(i,o){1&i&&(e.j41(0,"app-branch-node",0),e.bIt("modelValueChange",function(a){return o.modelValue=a})("insertNode",function(a){return o.onInsertNode(a)})("moveL",function(){return o.onMoveL()})("moveR",function(){return o.onMoveR()})("delete",function(){return o.onDelete()})("select",function(){return o.onSelect()}),e.k0s()),2&i&&e.Y8G("modelValue",o.modelValue)("readonly",o.readonly)("showError",o.showErr)("errorInfo",o.errInfo)("color",o.color())("isDefault",o.isDefault)("moveRn",o.moveRn)("moveLn",o.moveLn)("desc","\u4f18\u5148\u7ea7 "+(o.index+1))},dependencies:[Y]})}}return n})(),_e=(()=>{class n extends P{constructor(){super(...arguments),this.readonly=!1,this.branch=[],this.index=0,this.moveLn=!1,this.isDefault=!1,this.moveRn=!1,this.modelValueChange=new e.bkB,this.select=new e.bkB,this.delete=new e.bkB,this.insertNode=new e.bkB,this.moveL=new e.bkB,this.moveR=new e.bkB}validate(t){return!0}onSelect(){this.select.emit(this.modelValue)}onDelete(){this.delete.emit({branch:this.branch,index:this.index})}onInsertNode(t){this.insertNode.emit({branch:this.branch,index:this.index,type:t})}onMoveL(){this.moveL.emit()}onMoveR(){this.moveR.emit()}code(){return"parallel"}color(){return"#718dff"}name(){return"\u5e76\u884c\u5206\u652f"}create(){return{id:b()+"_fork",type:"gateway",name:"\u7f51\u5173\u8282\u70b9",props:{type:this.code(),branch:[this.createBranch(1),this.createBranch()]},branch:[[],[]]}}createBranch(t){return{id:b(),type:"parallel",name:"\u5e76\u884c\u8def\u5f84"+(t||2),parentId:null,childId:null}}static{this.\u0275fac=function(){let t;return function(o){return(t||(t=e.xGo(n)))(o||n)}}()}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-parallel-node"]],inputs:{readonly:"readonly",modelValue:"modelValue",branch:"branch",index:"index",moveLn:"moveLn",isDefault:"isDefault",moveRn:"moveRn"},outputs:{modelValueChange:"modelValueChange",select:"select",delete:"delete",insertNode:"insertNode",moveL:"moveL",moveR:"moveR"},features:[e.Vt3],decls:1,vars:5,consts:[["desc","\u5e76\u884c\u6267\u884c","headerIcon","apartment","content","\u5e76\u884c\u6d41\u7a0b\u5206\u652f",3,"modelValue","readonly","color","moveRn","moveLn","modelValueChange","insertNode","moveL","moveR","delete","select"]],template:function(i,o){1&i&&(e.j41(0,"app-branch-node",0),e.bIt("modelValueChange",function(a){return o.modelValue=a})("insertNode",function(a){return o.onInsertNode(a)})("moveL",function(){return o.onMoveL()})("moveR",function(){return o.onMoveR()})("delete",function(){return o.onDelete()})("select",function(){return o.onSelect()}),e.k0s()),2&i&&e.Y8G("modelValue",o.modelValue)("readonly",o.readonly)("color",o.color())("moveRn",o.moveRn)("moveLn",o.moveLn)},dependencies:[Y]})}}return n})(),Q=(()=>{class n extends P{constructor(){super(...arguments),this.readonly=!1,this.branch=[],this.index=0,this.modelChange=new e.bkB,this.select=new e.bkB,this.delete=new e.bkB,this.insertNode=new e.bkB,this.showErr=!1,this.errInfo=null}validate(t){}onSelect(){this.select.emit(this.model)}onInsertNode(t){this.insertNode.emit({branch:this.branch,index:this.index,type:t})}code(){return"start"}color(){return"#80929C"}name(){return"\u53d1\u8d77\u4eba"}create(){return{type:this.code(),name:this.name()}}static{this.\u0275fac=function(){let t;return function(o){return(t||(t=e.xGo(n)))(o||n)}}()}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-start-node"]],inputs:{readonly:"readonly",model:"model",branch:"branch",index:"index"},outputs:{modelChange:"modelChange",select:"select",delete:"delete",insertNode:"insertNode"},features:[e.Vt3],decls:2,vars:5,consts:[["headerColor","#80929C","headerIcon","user",3,"model","readonly","showClose","showError","errorInfo","modelChange","select","insertNode"]],template:function(i,o){1&i&&(e.j41(0,"erupt-node",0),e.bIt("modelChange",function(a){return o.model=a})("select",function(){return o.onSelect()})("insertNode",function(a){return o.onInsertNode(a)}),e.EFF(1," \u6d41\u7a0b\u4ece\u672c\u8282\u70b9\u5f00\u59cb\n"),e.k0s()),2&i&&e.Y8G("model",o.model)("readonly",o.readonly)("showClose",!1)("showError",o.showErr)("errorInfo",o.errInfo)},dependencies:[R]})}}return n})();const ue=[new Q,new de,new he,new me,new _e],N={};for(let n of ue)N[n.code()]=n;var F=c(6389),G=c(5930);function Xi(n,s){if(1&n){const t=e.RV6();e.j41(0,"div",6),e.bIt("click",function(){e.eBV(t);const o=e.XpG().$implicit,r=e.XpG(2);return e.Njj(r.onInsertNode(o.code()))}),e.EFF(1),e.k0s()}if(2&n){const t=e.XpG().$implicit;e.xc7("color",t.color()),e.R7$(1),e.SpI(" ",t.name()," ")}}function Hi(n,s){if(1&n&&(e.qex(0),e.DNE(1,Xi,2,3,"div",5),e.bVm()),2&n){const t=s.$implicit;e.R7$(1),e.Y8G("ngIf","start"!=t.code())}}function Ui(n,s){if(1&n&&(e.j41(0,"div",3),e.DNE(1,Hi,2,1,"ng-container",4),e.k0s()),2&n){const t=e.XpG();e.R7$(1),e.Y8G("ngForOf",t.nodeList)}}let ge=(()=>{class n{constructor(){this.insertNode=new e.bkB,this.popoverVisible=!1,this.nodeList=ue}onInsertNode(t){this.insertNode.emit(t),this.popoverVisible=!1}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-insert-btn"]],outputs:{insertNode:"insertNode"},decls:4,vars:1,consts:[["nz-button","","nzShape","circle","nz-popover","","nzPopoverTitle","\u8bf7\u9009\u62e9\u6d41\u7a0b\u8282\u70b9","nzPopoverPlacement","right","nzPopoverTrigger","click",2,"z-index","1","filter","drop-shadow(0 4px 8px rgba(31,35,41,.1))",3,"nzPopoverContent"],["nz-icon","","nzType","plus",2,"font-size","16px"],["nzPopoverContent",""],[1,"node-options",2,"width","360px"],[4,"ngFor","ngForOf"],[3,"color","click",4,"ngIf"],[3,"click"]],template:function(i,o){if(1&i&&(e.j41(0,"button",0),e.nrm(1,"span",1),e.DNE(2,Ui,2,1,"ng-template",null,2,e.C5r),e.k0s()),2&i){const r=e.sdS(3);e.Y8G("nzPopoverContent",r)}},dependencies:[l.Sq,l.bT,T.aO,F.c,G.p,h.Dn,re.L_],styles:[".node-options[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.node-options[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:3px;margin-right:5px;border-radius:10px;border:1px solid #DEDFDF}.node-options[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;padding:8px 10px;border-radius:15px;background:#F8F9F9;margin:5px;width:110px}.node-options[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:hover{box-shadow:0 0 5px #e3e3e3}"]})}}return n})();var fe=c(4710);const Yi=["startNode","approvalNode","ccNode","exclusiveNode","parallelNode","branchNode","childNodeRef"];function Qi(n,s){if(1&n){const t=e.RV6();e.j41(0,"app-start-node",4,5),e.bIt("modelChange",function(o){e.eBV(t);const r=e.XpG();return e.Njj(r.node=o)})("modelChange",function(o){e.eBV(t);const r=e.XpG();return e.Njj(r.nodeChange.emit(o))})("insertNode",function(o){e.eBV(t);const r=e.XpG();return e.Njj(r.insertNodeFun(r.branch,o.index,o.type))})("delete",function(o){e.eBV(t);const r=e.XpG();return e.Njj(r.deleteNode(r.branch,o.index))})("select",function(o){e.eBV(t);const r=e.XpG();return e.Njj(r.select.emit(o))}),e.k0s()}if(2&n){const t=e.XpG();e.Y8G("readonly",t.readonly)("model",t.node)("branch",t.branch)("index",t.index)}}function Zi(n,s){if(1&n){const t=e.RV6();e.j41(0,"app-approval-node",6,7),e.bIt("modelValueChange",function(o){e.eBV(t);const r=e.XpG();return e.Njj(r.node=o)})("modelValueChange",function(o){e.eBV(t);const r=e.XpG();return e.Njj(r.nodeChange.emit(o))})("insertNode",function(o){e.eBV(t);const r=e.XpG();return e.Njj(r.insertNodeFun(r.branch,o.index,o.type))})("delete",function(o){e.eBV(t);const r=e.XpG();return e.Njj(r.deleteNode(r.branch,o.index))})("select",function(o){e.eBV(t);const r=e.XpG();return e.Njj(r.select.emit(o))}),e.k0s()}if(2&n){const t=e.XpG();e.Y8G("readonly",t.readonly)("modelValue",t.node)("branch",t.branch)("index",t.index)}}function Wi(n,s){if(1&n){const t=e.RV6();e.j41(0,"app-cc-node",6,8),e.bIt("modelValueChange",function(o){e.eBV(t);const r=e.XpG();return e.Njj(r.node=o)})("modelValueChange",function(o){e.eBV(t);const r=e.XpG();return e.Njj(r.nodeChange.emit(o))})("insertNode",function(o){e.eBV(t);const r=e.XpG();return e.Njj(r.insertNodeFun(r.branch,o.index,o.type))})("delete",function(o){e.eBV(t);const r=e.XpG();return e.Njj(r.deleteNode(r.branch,o.index))})("select",function(o){e.eBV(t);const r=e.XpG();return e.Njj(r.select.emit(o))}),e.k0s()}if(2&n){const t=e.XpG();e.Y8G("readonly",t.readonly)("modelValue",t.node)("branch",t.branch)("index",t.index)}}function Ki(n,s){if(1&n){const t=e.RV6();e.j41(0,"button",14),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.addBranch())}),e.EFF(1," \u6dfb\u52a0\u5206\u652f "),e.k0s()}}function Ji(n,s){if(1&n){const t=e.RV6();e.j41(0,"app-exclusive-node",17,18),e.bIt("modelValueChange",function(o){e.eBV(t);const r=e.XpG().index,a=e.XpG(2);return e.Njj(a.node.props.branch[r]=o)})("insertNode",function(o){e.eBV(t);const r=e.XpG().index,a=e.XpG(2);return e.Njj(a.insertNodeFun(a.node.branch[r],o.index,o.type))})("delete",function(){e.eBV(t);const o=e.XpG().index,r=e.XpG(2);return e.Njj(r.deleteBranch(o))})("copy",function(){e.eBV(t);const o=e.XpG().index,r=e.XpG(2);return e.Njj(r.copyBranch(o))})("moveL",function(){e.eBV(t);const o=e.XpG().index,r=e.XpG(2);return e.Njj(r.moveL(o))})("moveR",function(){e.eBV(t);const o=e.XpG().index,r=e.XpG(2);return e.Njj(r.moveR(o))})("select",function(o){e.eBV(t);const r=e.XpG().index,a=e.XpG(2);return e.Njj(a.selectFun(o,r))}),e.k0s()}if(2&n){const t=e.XpG().index,i=e.XpG(2);e.Y8G("readonly",i.readonly)("modelValue",i.node.props.branch[t])("index",t)("moveRn",t<i.node.branch.length-("parallel"!==i.node.props.type?2:1))("moveLn",t>0)("isDefault",t===i.node.branch.length-1&&"parallel"!==i.node.props.type)}}function qi(n,s){if(1&n){const t=e.RV6();e.j41(0,"app-parallel-node",17,18),e.bIt("modelValueChange",function(o){e.eBV(t);const r=e.XpG().index,a=e.XpG(2);return e.Njj(a.node.props.branch[r]=o)})("insertNode",function(o){e.eBV(t);const r=e.XpG().index,a=e.XpG(2);return e.Njj(a.insertNodeFun(a.node.branch[r],o.index,o.type))})("delete",function(){e.eBV(t);const o=e.XpG().index,r=e.XpG(2);return e.Njj(r.deleteBranch(o))})("copy",function(){e.eBV(t);const o=e.XpG().index,r=e.XpG(2);return e.Njj(r.copyBranch(o))})("moveL",function(){e.eBV(t);const o=e.XpG().index,r=e.XpG(2);return e.Njj(r.moveL(o))})("moveR",function(){e.eBV(t);const o=e.XpG().index,r=e.XpG(2);return e.Njj(r.moveR(o))})("select",function(o){e.eBV(t);const r=e.XpG().index,a=e.XpG(2);return e.Njj(a.selectFun(o,r))}),e.k0s()}if(2&n){const t=e.XpG().index,i=e.XpG(2);e.Y8G("readonly",i.readonly)("modelValue",i.node.props.branch[t])("index",t)("moveRn",t<i.node.branch.length-("parallel"!==i.node.props.type?2:1))("moveLn",t>0)("isDefault",t===i.node.branch.length-1&&"parallel"!==i.node.props.type)}}function eo(n,s){if(1&n){const t=e.RV6();e.qex(0),e.j41(1,"app-recursive-node",19,20),e.bIt("nodeChange",function(o){const a=e.eBV(t).index,p=e.XpG().$implicit;return e.Njj(p[a]=o)})("insertNode",function(o){e.eBV(t);const r=e.XpG().$implicit,a=e.XpG(2);return e.Njj(a.insertNodeFun(r,o.index,o.type))})("delete",function(o){e.eBV(t);const r=e.XpG().$implicit,a=e.XpG(2);return e.Njj(a.deleteNode(r,o.index))})("select",function(o){e.eBV(t);const r=e.XpG(3);return e.Njj(r.select.emit(o))}),e.k0s(),e.bVm()}if(2&n){const t=s.$implicit,i=s.index,o=e.XpG().$implicit,r=e.XpG(2);e.R7$(1),e.Y8G("readonly",r.readonly)("node",t)("branch",o)("index",i)}}function to(n,s){if(1&n&&(e.j41(0,"div")(1,"div"),e.qex(2,0),e.DNE(3,Ji,2,6,"app-exclusive-node",15),e.DNE(4,qi,2,6,"app-parallel-node",15),e.bVm(),e.DNE(5,eo,3,4,"ng-container",16),e.k0s()()),2&n){const t=s.$implicit,i=s.index,o=e.XpG(2);e.HbH("p-branch-item"+(0===i?" p-branch-item-l":"")+(i===o.node.branch.length-1?" p-branch-item-r":"")),e.R7$(2),e.Y8G("ngSwitch",o.node.props.type),e.R7$(1),e.Y8G("ngSwitchCase","exclusive"),e.R7$(1),e.Y8G("ngSwitchCase","parallel"),e.R7$(1),e.Y8G("ngForOf",t)}}const no=function(n){return{"p-branch-end":n}};function io(n,s){if(1&n){const t=e.RV6();e.j41(0,"div",9)(1,"div",10),e.DNE(2,Ki,2,0,"button",11),e.DNE(3,to,6,6,"div",12),e.k0s(),e.j41(4,"erupt-node",13),e.bIt("insertNode",function(o){e.eBV(t);const r=e.XpG();return e.Njj(r.insertNode.emit({branch:r.branch,index:r.index,type:o}))}),e.k0s()()}if(2&n){const t=e.XpG();e.R7$(2),e.Y8G("ngIf",!t.readonly),e.R7$(1),e.Y8G("ngForOf",t.node.branch),e.R7$(1),e.HbH(e.eq3(6,no,t.branch.length===t.index+1)),e.Y8G("readonly",t.readonly)("showBody",!1)}}let oo=(()=>{class n{constructor(){this.readonly=!1,this.branch=[],this.index=0,this.nodeChange=new e.bkB,this.select=new e.bkB,this.delete=new e.bkB,this.insertNode=new e.bkB}insertNodeFun(t,i,o){if(N[o]){const r=N[o].create();t.splice(i+1,0,r)}}deleteNode(t,i){t.splice(i,1)}addBranch(){const t=this.node.branch.length-1;this.node.props.branch.splice(t,0,N[this.node.props.type].createBranch(t+1)),this.node.branch.splice(t,0,[])}deepCopy(t){return JSON.parse(JSON.stringify(t))}copyBranch(t){const i=this.deepCopy(this.node.props.branch[t]);i.name=i.name+"-copy";const o=this.deepCopy(this.node.branch[t]);V(i),V(o),this.node.props.branch.splice(t+1,0,i),this.node.branch.splice(t+1,0,o)}deleteBranch(t){this.node.branch.length<=2?this.delete.emit({branch:this.branch,index:this.index}):(this.node.props.branch.splice(t,1),this.node.branch.splice(t,1))}moveL(t){this.exchange(this.node.props.branch,t,t-1),this.exchange(this.node.branch,t,t-1)}moveR(t){this.exchange(this.node.props.branch,t,t+1),this.exchange(this.node.branch,t,t+1)}exchange(t,i,o){const r=t[i];t[i]=t[o],t[o]=r}selectFun(t,i){}validate(t){this.nodeRefs&&this.nodeRefs.forEach(i=>{const o=i.nativeElement.__ngContext__;o&&o.validate&&o.validate(t)})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-recursive-node"]],viewQuery:function(i,o){if(1&i&&e.GBs(Yi,5),2&i){let r;e.mGM(r=e.lsd())&&(o.nodeRefs=r)}},inputs:{readonly:"readonly",node:"node",branch:"branch",index:"index"},outputs:{nodeChange:"nodeChange",select:"select",delete:"delete",insertNode:"insertNode"},decls:5,vars:5,consts:[[3,"ngSwitch"],[3,"readonly","model","branch","index","modelChange","insertNode","delete","select",4,"ngSwitchCase"],[3,"readonly","modelValue","branch","index","modelValueChange","insertNode","delete","select",4,"ngSwitchCase"],["class","p-gateway",4,"ngSwitchCase"],[3,"readonly","model","branch","index","modelChange","insertNode","delete","select"],["startNode",""],[3,"readonly","modelValue","branch","index","modelValueChange","insertNode","delete","select"],["approvalNode",""],["ccNode",""],[1,"p-gateway"],[1,"p-branch"],["nz-button","","nzType","default","nzShape","round","class","p-gateway-add",3,"click",4,"ngIf"],[3,"class",4,"ngFor","ngForOf"],[3,"readonly","showBody","insertNode"],["nz-button","","nzType","default","nzShape","round",1,"p-gateway-add",3,"click"],[3,"readonly","modelValue","index","moveRn","moveLn","isDefault","modelValueChange","insertNode","delete","copy","moveL","moveR","select",4,"ngSwitchCase"],[4,"ngFor","ngForOf"],[3,"readonly","modelValue","index","moveRn","moveLn","isDefault","modelValueChange","insertNode","delete","copy","moveL","moveR","select"],["branchNode",""],[3,"readonly","node","branch","index","nodeChange","insertNode","delete","select"],["childNodeRef",""]],template:function(i,o){1&i&&(e.qex(0,0),e.DNE(1,Qi,2,4,"app-start-node",1),e.DNE(2,Zi,2,4,"app-approval-node",2),e.DNE(3,Wi,2,4,"app-cc-node",2),e.DNE(4,io,5,8,"div",3),e.bVm()),2&i&&(e.Y8G("ngSwitch",o.node.type),e.R7$(1),e.Y8G("ngSwitchCase","start"),e.R7$(1),e.Y8G("ngSwitchCase","approval"),e.R7$(1),e.Y8G("ngSwitchCase","cc"),e.R7$(1),e.Y8G("ngSwitchCase","gateway"))},dependencies:[l.Sq,l.bT,l.ux,l.e1,T.aO,F.c,G.p,Q,de,he,me,_e,R,n],styles:['.p-gateway[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;position:relative;width:100%}.p-gateway[_ngcontent-%COMP%]   .p-gateway-add[_ngcontent-%COMP%]{z-index:2;top:-16px;position:absolute}.p-gateway[_ngcontent-%COMP%]   .p-branch[_ngcontent-%COMP%]{display:flex;position:relative;justify-content:center;background:#f5f7fa;width:100%}.p-gateway[_ngcontent-%COMP%]   .p-branch[_ngcontent-%COMP%]:before, .p-gateway[_ngcontent-%COMP%]   .p-branch[_ngcontent-%COMP%]:after{content:"";position:absolute;left:160px;right:160px;height:2px;background:#d9d9d9;z-index:0}.p-gateway[_ngcontent-%COMP%]   .p-branch[_ngcontent-%COMP%]:before{top:0}.p-gateway[_ngcontent-%COMP%]   .p-branch[_ngcontent-%COMP%]:after{bottom:0}.p-gateway[_ngcontent-%COMP%]   .p-branch[_ngcontent-%COMP%]   .p-branch-item[_ngcontent-%COMP%]{position:relative;padding:0 60px;display:flex;justify-content:center}.p-gateway[_ngcontent-%COMP%]   .p-branch[_ngcontent-%COMP%]   .p-branch-item[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{z-index:1;margin-top:40px;display:flex;flex-direction:column;align-items:center}.p-gateway[_ngcontent-%COMP%]   .p-branch[_ngcontent-%COMP%]   .p-branch-item[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > .p-node[_ngcontent-%COMP%]:last-child   [_ngcontent-%COMP%]:deep(.p-node-add):after{display:none!important}.p-gateway[_ngcontent-%COMP%]   .p-branch[_ngcontent-%COMP%]   .p-branch-item[_ngcontent-%COMP%]:before{content:"";position:absolute;background:#d9d9d9;height:100%;width:2px}.p-gateway[_ngcontent-%COMP%]   .p-branch[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:deep(.p-branch-end   .p-node-add)[_ngcontent-%COMP%]:after{display:none!important}']})}}return n})();const ro=["node"];function so(n,s){if(1&n){const t=e.RV6();e.qex(0),e.j41(1,"app-recursive-node",3,4),e.bIt("nodeChange",function(o){const a=e.eBV(t).index,p=e.XpG();return e.Njj(p.modelValue[a]=o)})("select",function(o){e.eBV(t);const r=e.XpG();return e.Njj(r.select.emit(o))})("delete",function(o){e.eBV(t);const r=e.XpG();return e.Njj(r.deleteNode(o.branch,o.index))})("insertNode",function(o){e.eBV(t);const r=e.XpG();return e.Njj(r.insertNode(o.branch,o.index,o.type))}),e.k0s(),e.bVm()}if(2&n){const t=s.$implicit,i=s.index,o=e.XpG();e.R7$(1),e.Y8G("readonly",o.readonly)("node",t)("branch",o.modelValue)("index",i)}}let ao=(()=>{class n{constructor(){this.readonly=!1,this.modelValueChange=new e.bkB,this.select=new e.bkB}ngOnInit(){}deleteNode(t,i){t.splice(i,1)}insertNode(t,i,o){if(N[o]&&N[o].create){const r=N[o].create();t.splice(i+1,0,r)}}validate(){return new Promise((t,i)=>{const o=[];this.nodeRefs&&this.nodeRefs.forEach(r=>{const a=r.nativeElement.__ngContext__;a&&a.validate&&a.validate(o)}),0===o.length?t(!0):i(o)})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-process-render"]],viewQuery:function(i,o){if(1&i&&e.GBs(ro,5),2&i){let r;e.mGM(r=e.lsd())&&(o.nodeRefs=r)}},inputs:{readonly:"readonly",modelValue:"modelValue"},outputs:{modelValueChange:"modelValueChange",select:"select"},decls:4,vars:1,consts:[[1,"process"],[4,"ngFor","ngForOf"],[1,"process-end"],[3,"readonly","node","branch","index","nodeChange","select","delete","insertNode"],["node",""]],template:function(i,o){1&i&&(e.j41(0,"div",0),e.DNE(1,so,3,4,"ng-container",1),e.j41(2,"div",2),e.EFF(3,"\u6d41\u7a0b\u7ed3\u675f"),e.k0s()()),2&i&&(e.R7$(1),e.Y8G("ngForOf",o.modelValue))},dependencies:[l.Sq,oo],styles:[".process[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;min-width:100%;min-height:100%;padding:20px;width:max-content;height:max-content;transform-origin:center center}.process[_ngcontent-%COMP%]   .process-node[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%;margin-bottom:20px;min-width:200px}.process[_ngcontent-%COMP%]   .process-end[_ngcontent-%COMP%]{text-align:center;padding:10px;border-radius:5px;background:var(--node-line-color);margin-top:20px;min-width:100px}"]})}}return n})();const co=["processRender"],lo=["canvasContainer"],po=[{path:"",component:(()=>{class n{constructor(t){this.message=t,this.modelValue=[],this.modelValueChange=new e.bkB,this.isDragging=!1,this.startX=0,this.startY=0,this.startScrollLeft=0,this.startScrollTop=0,this.scale=1,this.minScale=.1,this.maxScale=3,this.scaleStep=.1,this.zoomSupported=this.checkZoomSupport()}checkZoomSupport(){const t=document.createElement("div");return t.style.zoom="1.1","1.1"===t.style.zoom}ngAfterViewInit(){this.initCanvasDrag()}ngOnInit(){0===this.modelValue.length&&(this.modelValue=[(new Q).create()],this.modelValueChange.emit(this.modelValue))}initCanvasDrag(){if(this.canvasContainer){const t=this.canvasContainer.nativeElement;t.style.cursor="grab",t.style.userSelect="none"}}getScrollableContainer(){if(!this.canvasContainer)return null;let t=this.canvasContainer.nativeElement.parentElement;for(;t;){const i=window.getComputedStyle(t);if("auto"===i.overflow||"scroll"===i.overflow||"auto"===i.overflowX||"scroll"===i.overflowX||"auto"===i.overflowY||"scroll"===i.overflowY)return t;t=t.parentElement}return this.canvasContainer.nativeElement.closest(".flow")}getProcessRenderElement(){return this.processRender?this.processRender.elementRef?.nativeElement||this.processRender.el?.nativeElement||this.canvasContainer.nativeElement.querySelector("app-process-render"):null}applyScale(){const t=this.getProcessRenderElement();t&&(this.zoomSupported?(t.style.zoom=this.scale.toString(),t.style.transform="",t.style.transformOrigin=""):(t.style.transform=`scale(${this.scale})`,t.style.transformOrigin="center center",t.style.zoom=""))}onMouseDown(t){const i=t.target,o=this.canvasContainer?.nativeElement;if(o&&(i===o||o.contains(i))){if(i.closest("button, input, select, textarea, [contenteditable], .node-input, .node-edit, .node-delete, .insert-btn"))return;this.isDragging=!0,this.startX=t.clientX,this.startY=t.clientY;const a=this.getScrollableContainer();a&&(this.startScrollLeft=a.scrollLeft,this.startScrollTop=a.scrollTop),o.style.cursor="grabbing"}}onMouseMove(t){if(this.isDragging){const i=this.startX-t.clientX,o=this.startY-t.clientY,r=this.getScrollableContainer();r&&(r.scrollLeft=this.startScrollLeft+i,r.scrollTop=this.startScrollTop+o),t.preventDefault()}}onMouseUp(t){this.isDragging&&(this.isDragging=!1,this.canvasContainer.nativeElement.style.cursor="grab")}onMouseLeave(t){this.isDragging&&(this.isDragging=!1,this.canvasContainer.nativeElement.style.cursor="grab")}selectNode(t){}doZoom(t){this.scale=t>0?Math.min(this.maxScale,this.scale+this.scaleStep):Math.max(this.minScale,this.scale-this.scaleStep),this.applyScale()}doHit(){this.scale=1,this.applyScale();const t=this.getScrollableContainer();if(t){const i=t.scrollWidth-t.clientWidth;t.scrollLeft=i>0?i/2:0,t.scrollTop=0}}validate(){return this.processRender.validate()}static{this.\u0275fac=function(i){return new(i||n)(e.rXU(W.xh))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["erupt-flow"]],viewQuery:function(i,o){if(1&i&&(e.GBs(co,5),e.GBs(lo,5)),2&i){let r;e.mGM(r=e.lsd())&&(o.processRender=r.first),e.mGM(r=e.lsd())&&(o.canvasContainer=r.first)}},hostBindings:function(i,o){1&i&&e.bIt("mousedown",function(a){return o.onMouseDown(a)})("mousemove",function(a){return o.onMouseMove(a)})("mouseup",function(a){return o.onMouseUp(a)})("mouseleave",function(a){return o.onMouseLeave(a)})},outputs:{modelValueChange:"modelValueChange"},decls:16,vars:6,consts:[[1,"flow"],[1,"p-operation"],[1,"p-operation-zoom"],["nz-button","","nzSize","small","title","\u7f29\u5c0f",3,"click"],["nz-icon","","nzType","minus"],[1,"zoom-text"],["nz-button","","nzSize","small","title","\u91cd\u7f6e\u89c6\u56fe",3,"click"],["nz-icon","","nzType","reload"],["nz-button","","nzSize","small","title","\u653e\u5927",3,"click"],["nz-icon","","nzType","plus"],[1,"canvas-container",2,"width","100%","height","100%","position","relative"],["canvasContainer",""],[3,"readonly","modelValue","modelValueChange","select"],["processRender",""]],template:function(i,o){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),e.bIt("click",function(){return o.doZoom(-1)}),e.nrm(4,"span",4),e.k0s(),e.j41(5,"span",5),e.EFF(6),e.nI1(7,"number"),e.k0s(),e.j41(8,"button",6),e.bIt("click",function(){return o.doHit()}),e.nrm(9,"span",7),e.k0s(),e.j41(10,"button",8),e.bIt("click",function(){return o.doZoom(1)}),e.nrm(11,"span",9),e.k0s()()(),e.j41(12,"div",10,11)(14,"app-process-render",12,13),e.bIt("modelValueChange",function(a){return o.modelValue=a})("select",function(a){return o.selectNode(a)}),e.k0s()()()),2&i&&(e.R7$(6),e.SpI("",e.i5U(7,3,100*o.scale,"1.0-0"),"%"),e.R7$(8),e.Y8G("readonly",!1)("modelValue",o.modelValue))},dependencies:[T.aO,F.c,G.p,h.Dn,ao,l.QX],styles:[".alain-default__collapsed[_nghost-%COMP%]   .flow[_ngcontent-%COMP%]   .p-operation[_ngcontent-%COMP%], .alain-default__collapsed   [_nghost-%COMP%]   .flow[_ngcontent-%COMP%]   .p-operation[_ngcontent-%COMP%]{left:68px!important}.flow[_ngcontent-%COMP%]{width:100%;height:calc(100vh - 48px);padding:28px;overflow:auto;position:relative}.flow[_ngcontent-%COMP%]   .p-operation[_ngcontent-%COMP%]{position:fixed;bottom:20px;left:220px;z-index:99;transition:all .3s ease}.flow[_ngcontent-%COMP%]   .p-operation[_ngcontent-%COMP%]   .p-operation-zoom[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background:rgba(255,255,255,.9);border-radius:6px;padding:8px;box-shadow:0 2px 8px #00000026;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.flow[_ngcontent-%COMP%]   .p-operation[_ngcontent-%COMP%]   .p-operation-zoom[_ngcontent-%COMP%]   .zoom-text[_ngcontent-%COMP%]{padding:0 12px;font-size:14px;color:var(--text-color);font-weight:500;min-width:50px;text-align:center}.flow[_ngcontent-%COMP%]   .p-operation[_ngcontent-%COMP%]   .p-operation-zoom[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 2px}.flow[_ngcontent-%COMP%]   .p-operation[_ngcontent-%COMP%]   .p-operation-zoom[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.flow[_ngcontent-%COMP%]   .canvas-container[_ngcontent-%COMP%]{cursor:grab;user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;position:relative;width:100%;height:100%}.flow[_ngcontent-%COMP%]   .canvas-container[_ngcontent-%COMP%]:active{cursor:grabbing}.flow[_ngcontent-%COMP%]   .canvas-container[_ngcontent-%COMP%]   app-process-render[_ngcontent-%COMP%]{display:block;position:relative}.flow[_ngcontent-%COMP%]   .canvas-container[_ngcontent-%COMP%]   .process-node[_ngcontent-%COMP%], .flow[_ngcontent-%COMP%]   .canvas-container[_ngcontent-%COMP%]   app-recursive-node[_ngcontent-%COMP%]{cursor:default;user-select:text;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text}.process-designer[_ngcontent-%COMP%]{display:block;min-width:100%;min-height:100%;position:relative}"]})}}return n})(),data:{desc:"Flow",status:!0}}];let ho=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=e.$C({type:n})}static{this.\u0275inj=e.G2t({imports:[fe.iI.forChild(po),fe.iI]})}}return n})(),mo=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=e.$C({type:n})}static{this.\u0275inj=e.G2t({imports:[ho,l.MD,u.YN,u.X1,ve.q1,T.Zw,S.j,A.eq,W.Sg,h.Y3,qe,et.PQ,tt.DH,oe.IJ,nt.Sw,it.LE,ot.eT,rt.$,st.Sk,at.jw,ct.SE,lt.U6,pt.g9,I.Qt,re.MC,dt.Ti,ht.g,gt,ft.f3,bt,Nt.GP,Ft,Bt.hM,jt.$G,Vt.rD,Gt.Yb,$t.W2,At.T,se.m,Lt.V,Xt.i3,Ht.$,Ut.K9,Yt.sH,B._v,zn,En,Gn,$n.GB,An.xQ,ni,ii.x2,bi,Ni.jl,Ti.GP]})}}return n})();e.wjB(R,[l.bT,u.me,u.BC,u.vS,T.aO,F.c,G.p,A.vg,A.wk,h.Dn,I.VJ,ge],[]),e.wjB(Y,[l.bT,u.me,u.BC,u.vS,F.c,h.Dn,Je,I.VJ,ge],[])}}]);